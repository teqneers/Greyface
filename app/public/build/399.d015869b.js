"use strict";(self.webpackChunk_teqneers_greyface=self.webpackChunk_teqneers_greyface||[]).push([[399],{201:(e,t,n)=>{n.d(t,{A:()=>c});var a=n(6540),r=n(3048),l=n(545),o=n(2100);const c=e=>{let{title:t,children:n}=e;const{t:c}=(0,o.Bd)();return a.createElement(r.A,{fluid:!0,className:"module-container mt-4"},a.createElement(l.mg,null,a.createElement("title",null,c(t))),n)}},1005:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(6540),r=n(5615),l=n(2100);const o=function(e){let{label:t,onClick:n}=e;const{t:o}=(0,l.Bd)();return a.createElement(r.A,{variant:"outline-secondary",className:"m-1",size:"sm",onClick:n},o(t||"button.cancel"))}},6076:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(6540),r=n(5615),l=n(2100);const o=function(e){let{label:t,variant:n,disabled:o=!1,type:c="button",onClick:i}=e;const{t:s}=(0,l.Bd)();return a.createElement(r.A,{variant:n||"outline-primary",size:"sm",className:"m-1",onClick:i||null,disabled:o,type:c},s(t))}},914:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(6540),r=n(5615),l=n(2100);const o=function(e){let{label:t,onClick:n}=e;const{t:o}=(0,l.Bd)();return a.createElement(r.A,{variant:"outline-danger",className:"m-1",size:"sm",onClick:n},o(t||"button.delete"))}},3043:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(6540),r=n(5615),l=n(2100);const o=function(e){let{label:t,variant:n,disabled:o=!1,type:c="submit",onClick:i}=e;const{t:s}=(0,l.Bd)();return a.createElement(r.A,{variant:n||"outline-primary",size:"sm",className:"m-1",onClick:i||null,disabled:o,type:c},s(t))}},8799:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(6540),r=n(2418),l=n(1806),o=n(6828),c=n(2346);const i=e=>{let{date:t,format:n=r.Bp}=e;const i=(0,l.default)(null==t?void 0:t.date);return(0,o.default)(i)||console.log(t,i),a.createElement("span",null,(0,o.default)(i)?(0,c.default)(i,n):"-")}},4821:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(6540),r=n(8032),l=n(2100),o=n(1005),c=n(6076);const i=e=>{let{show:t=!0,title:n="",onCancel:i,onConfirm:s,confirmBtn:m,confirmBtnVariant:u,children:d}=e;const{t:h}=(0,l.Bd)();return a.createElement(r.A,{show:t,onHide:()=>i()},a.createElement(r.A.Header,{closeButton:!0},a.createElement(r.A.Title,null,h(n))),a.createElement(r.A.Body,null,d),a.createElement(r.A.Footer,null,a.createElement(o.A,{onClick:()=>i()}),a.createElement(c.A,{label:m||"button.delete",variant:u||"outline-danger",onClick:()=>s()})))}},3096:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(6540),r=n(8032),l=n(2100);const o=e=>{let{show:t=!0,title:n="",onHide:o,children:c}=e;const{t:i}=(0,l.Bd)();return a.createElement(r.A,{show:t,onHide:()=>o(),backdrop:"static"},a.createElement(r.A.Header,{closeButton:!0},a.createElement(r.A.Title,null,i(n))),c)}},2693:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(6540),r=n(9716),l=n(3048),o=n(9018),c=n(5378),i=n(2100);const s=e=>{let{title:t="",buttons:n,userFilter:s,searchQuery:m="",setSearchQuery:u}=e;const{t:d}=(0,i.Bd)();return a.createElement(r.A,{bg:"light",expand:"lg"},a.createElement(l.A,{fluid:!0},a.createElement(r.A.Brand,null,d(t)),a.createElement(r.A.Toggle,{"aria-controls":"navbarScroll"}),a.createElement(r.A.Collapse,{id:"navbarScroll"},a.createElement(o.A,{className:"me-auto my-2 my-lg-0"},n),a.createElement("div",{className:"d-flex gap-2"},s,a.createElement(c.A.Label,{column:!0},d("placeholder.searchByText")),a.createElement(c.A.Control,{type:"input",name:"search",placeholder:d("placeholder.search"),value:m,onChange:e=>{u(e.target.value)},autoComplete:"off"})))))}},2473:(e,t,n)=>{n.d(t,{A:()=>B});n(4114);var a=n(8168),r=n(4467),l=n(45),o=n(6540),c=n(2431),i=n(4479),s=n(1105),m=n(1069),u=n(5378),d=n(2645),h=n(2885);const p=["canSort","sortDescFirst","isSorted","isSortedDesc","children"],E=e=>{let{canSort:t=!1,sortDescFirst:n,isSorted:r,isSortedDesc:c,children:i}=e,s=(0,l.A)(e,p);return t?o.createElement("div",(0,a.A)({className:"d-flex th",role:"sort-marker"},s),o.createElement("div",{className:"content"},i),r?c?o.createElement("span",{className:"sort-icon active"}," ↓"):o.createElement("span",{className:"sort-icon active"}," ↑"):o.createElement("span",{className:"sort-icon"}," ⇅ ")):o.createElement(o.Fragment,null,i)};var g=n(6942),b=n.n(g),y=n(2100);const A=()=>{const{t:e}=(0,y.Bd)();return o.createElement("div",{style:{height:100,display:"flex",alignItems:"center",justifyContent:"center",textTransform:"uppercase"}},e("placeholder.noData"))},C=["columnCount","data","prepareRow","onRowClick","onRowDoubleClick","rowClassName"];const f=function(e){let{columnCount:t,data:n,prepareRow:r,onRowClick:c,onRowDoubleClick:i,rowClassName:s}=e,m=(0,l.A)(e,C);return o.createElement("tbody",m,n.length>0?n.map(((e,t)=>{r(e);let n=b()("tr",{clickable:!!c||!!i});return s&&(n=s(n,e.original,e.id,t,e)),o.createElement("tr",(0,a.A)({key:e.id},e.getRowProps(),{className:n,onDoubleClick:i?()=>i(e.original,e.id,t,e):null}),e.cells.map((n=>o.createElement("td",(0,a.A)({},n.getCellProps(),{onClick:c&&n.column.rowClick?()=>c(e.original,e.id,t,e):null}),n.render("Cell")))))})):o.createElement("tr",null,o.createElement("td",{colSpan:t},o.createElement(A,null))))};n(2953);const v="...",S=(e,t)=>{const n=t-e+1;return Array.from({length:n},((t,n)=>n+e))};function k(e){return e?(t,n,a)=>{const r=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const r=t.split(","),l=[];return r.map((t=>{const n=t.split(".").reduce(((e,t)=>{var n;return"object"==typeof e&&void 0!==e[t]&&null!==(n=e[t])&&void 0!==n?n:null}),e);l.push(null!=n?n:a)})),l.push(n),l.join("-")}(t,e,n);return String(r||(a?[a.id,n].join("."):n))}:(e,t,n)=>String(n?[n.id,t].join("."):t)}const w=["idColumn","onRowClick","onRowDoubleClick","rowClassName","onStateChange","pageCount"];function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const B=function(e){let{idColumn:t="id",onRowClick:n,onRowDoubleClick:r,rowClassName:p,onStateChange:g,pageCount:b}=e,y=(0,l.A)(e,w);const A=o.useMemo((()=>({width:150})),[]),{getTableProps:C,getTableBodyProps:P,headerGroups:B,prepareRow:j,page:D,canPreviousPage:N,canNextPage:x,pageCount:H,gotoPage:R,nextPage:W,previousPage:F,setPageSize:z,state:M,columns:I}=(0,h.useTable)(O(O({},y),{},{defaultColumn:A,manualSortBy:!0,manualPagination:!0,pageCount:b,getRowId:(0,o.useCallback)(k(t),[t])}),h.useSortBy,h.useColumnOrder,h.usePagination,h.useFlexLayout),{pageIndex:T,pageSize:Q}=M,L=(e=>{let{totalPageCount:t,siblingCount:n=1,currentPage:a}=e;return(0,o.useMemo)((()=>{if(n+5>=t)return S(1,t);const e=Math.max(a-n,1),r=Math.min(a+n,t),l=e>2,o=r<t-2,c=t;if(!l&&o)return[...S(1,3+2*n),v,t];if(l&&!o){const e=S(t-(3+2*n)+1,t);return[1,v,...e]}if(l&&o){const t=S(e,r);return[1,v,...t,v,c]}}),[t,n,a])})({totalPageCount:H,currentPage:T});return(0,d.Ay)((()=>{g&&g(M)}),[g,M]),o.createElement("div",{className:"gf-table"},o.createElement(c.A,(0,a.A)({bordered:!0,size:"sm"},C()),o.createElement("thead",null,B.map((e=>o.createElement("tr",(0,a.A)({key:e.id},e.getHeaderGroupProps()),e.headers.map((e=>o.createElement("th",(0,a.A)({key:e.id},e.getHeaderProps()),o.createElement(E,(0,a.A)({canSort:e.canSort,sortDescFirst:e.sortDescFirst,isSorted:e.isSorted,isSortedDesc:e.isSortedDesc},e.getSortByToggleProps()),e.render("Header"))))))))),o.createElement(f,(0,a.A)({columnCount:I.length,data:D,prepareRow:j},P(),{onRowClick:n,onRowDoubleClick:r,rowClassName:p}))),L.length>0&&o.createElement(i.A,null,o.createElement(s.A,null,o.createElement(m.A,null,o.createElement(m.A.First,{onClick:()=>R(0),disabled:!N}),o.createElement(m.A.Prev,{onClick:()=>F(),disabled:!N}),L.map(((e,t)=>e===v?o.createElement(m.A.Ellipsis,{key:t}):e-1===T?o.createElement(m.A.Item,{key:t,active:!0,onClick:()=>R(e-1)},e):o.createElement(m.A.Item,{key:t,onClick:()=>R(e-1)},e))),o.createElement(m.A.Next,{onClick:()=>W(),disabled:!x}),o.createElement(m.A.Last,{onClick:()=>R(H-1),disabled:!x}))),o.createElement(s.A,{md:4},o.createElement(u.A.Select,{size:"sm",className:"w-25 float-end",value:Q,onChange:e=>{z(Number(e.target.value))}},[10,15,20,25,30,50].map((e=>o.createElement("option",{key:e,value:e},"Show ",e)))))))}},8399:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var a=n(4467),r=(n(4114),n(2953),n(6540)),l=n(5942),o=n(6347),c=n(5705),i=n(201),s=n(7839),m=n(6076),u=n(166),d=n(2693),h=(n(3110),n(2735)),p=n(2100),E=n(3096),g=n(8168),b=n(45),y=n(5378),A=n(8032),C=n(4479),f=n(1105),v=n(2664),S=n(8084),k=n(1005),w=n(3043);const P=["onSubmit","submitBtn","onCancel"],O=v.Ik().noUnknown().shape({name:v.Yj().required().max(128),domain:v.Yj().required().min(1).max(128),source:v.Yj().required().max(128)});const B=function(e){let{onSubmit:t,submitBtn:n,onCancel:a}=e,l=(0,b.A)(e,P);const{t:o}=(0,p.Bd)();return r.createElement(S.l1,(0,g.A)({validateOnBlur:!0,validationSchema:O,onSubmit:e=>{t.mutate(e)}},l),(e=>{let{handleSubmit:l,handleChange:c,values:i,errors:s,isSubmitting:m}=e;return r.createElement(y.A,{noValidate:!0,onSubmit:l},r.createElement(A.A.Body,null,r.createElement(C.A,{className:"mb-3"},r.createElement(y.A.Group,{as:f.A,md:"12",controlId:"validationFormik00"},r.createElement(y.A.Label,null,o("autoWhitelist.email.name")),r.createElement(y.A.Control,{type:"text",name:"name",value:i.name,onChange:c,isInvalid:!!s.name}),r.createElement(y.A.Control.Feedback,{type:"invalid"},s.name)),r.createElement(y.A.Group,{as:f.A,md:"12",controlId:"validationFormik01"},r.createElement(y.A.Label,null,o("autoWhitelist.email.domain")),r.createElement(y.A.Control,{type:"text",name:"domain",value:i.domain,onChange:c,isInvalid:!!s.domain}),r.createElement(y.A.Control.Feedback,{type:"invalid"},s.domain)),r.createElement(y.A.Group,{as:f.A,md:"12",controlId:"validationFormik02"},r.createElement(y.A.Label,null,o("autoWhitelist.email.source")),r.createElement(y.A.Control,{type:"text",name:"source",value:i.source,onChange:c,isInvalid:!!s.source}),r.createElement(y.A.Control.Feedback,{type:"invalid"},s.source)))),r.createElement(A.A.Footer,null,r.createElement(k.A,{onClick:()=>a()}),r.createElement(w.A,{label:n,disabled:m&&!t.isError})))}))},j=e=>{let{onCancel:t,onCreate:n}=e;const[a,o]=(0,r.useState)(null),{t:i}=(0,p.Bd)(),{apiUrl:s}=(0,c.Y)(),m=(0,l.useMutation)((async e=>await fetch("".concat(s,"/awl/emails"),{method:"POST",body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw e;return o(null),e})).then((e=>e.json())).catch((e=>{e.json().then((e=>{o(e.error)}))}))),{onSuccess:async()=>{n()}});return r.createElement(E.A,{title:"autoWhitelist.email.addHeader",onHide:()=>t()},a&&r.createElement(h.A,{key:"danger",variant:"danger"},a),r.createElement(B,{initialValues:{name:"",domain:"",source:""},onSubmit:m,onCancel:t,submitBtn:i("button.save")}))};var D=n(8799),N=n(2473),x=n(2418),H=n(914),R=n(4821);const W=e=>{let{onDelete:t,data:n}=e;const{t:a}=(0,p.Bd)(),{apiUrl:o}=(0,c.Y)(),[i,s]=(0,r.useState)(!1),m=(0,l.useMutation)((e=>fetch("".concat(o,"/awl/emails/delete"),{method:"DELETE",body:JSON.stringify({name:e.name,domain:e.domain,source:e.source})}).then((async e=>{const n=await e.json();if(!e.ok){const t=n&&n.message||e.status;return Promise.reject(t)}t()})).catch((e=>{console.error("There was an error!",e)}))));return r.createElement(r.Fragment,null,r.createElement(H.A,{onClick:()=>s(!0)}),r.createElement(R.A,{show:i,onConfirm:()=>m.mutateAsync(n),onCancel:()=>s(!1),title:"autoWhitelist.email.deleteHeader"},a("autoWhitelist.email.deleteMessage")))},F=e=>{let{onUpdate:t,data:n}=e;const{t:a}=(0,p.Bd)(),{apiUrl:o}=(0,c.Y)(),[i,s]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null),g=(0,l.useMutation)((async e=>await fetch("".concat(o,"/awl/emails/edit"),{method:"PUT",body:JSON.stringify({dynamicID:{name:n.name,domain:n.domain,source:n.source},name:e.name,domain:e.domain,source:e.source})}).then((function(e){if(!e.ok)throw e;return d(null),e})).then((e=>e.json())).catch((e=>{e.json().then((e=>{d(e.error)}))}))),{onSuccess:async()=>{t()}});return r.createElement(r.Fragment,null,r.createElement(m.A,{label:"button.edit",onClick:()=>s(!0)}),r.createElement(E.A,{show:i,title:"autoWhitelist.email.editHeader",onHide:()=>s(!1)},u&&r.createElement(h.A,{key:"danger",variant:"danger"},u),r.createElement(B,{initialValues:{name:n.name,domain:n.domain,source:n.source},onSubmit:g,onCancel:()=>s(!1),submitBtn:a("button.save")})))},z=e=>{let{data:t,refetch:n,isFetching:a,pageCount:l,initialState:o,onStateChange:c}=e;const{t:i}=(0,p.Bd)(),s=(0,r.useMemo)((()=>[{Header:i("autoWhitelist.email.name"),id:"name",minWidth:300,maxWidth:500,accessor:e=>e.name,canSort:!0,disableResizing:!0},{Header:i("autoWhitelist.email.domain"),id:"domain",accessor:e=>e.domain,canSort:!0,disableResizing:!0},{Header:i("autoWhitelist.email.source"),id:"source",accessor:e=>e.source,canSort:!0,disableResizing:!0},{Header:i("autoWhitelist.email.firstSeen"),id:"firstSeen",accessor:e=>r.createElement(D.A,{date:e.firstSeen,format:x.$n}),canSort:!0,disableResizing:!0},{Header:i("autoWhitelist.email.lastSeen"),id:"lastSeen",accessor:e=>r.createElement(D.A,{date:e.lastSeen,format:x.$n}),canSort:!0,disableResizing:!0},{Header:"",id:"actions",width:100,minWidth:100,maxWidth:100,disableSortBy:!0,disableResizing:!0,Cell:e=>{let{row:{original:t}}=e;return r.createElement(r.Fragment,null,r.createElement(F,{onUpdate:n,data:t}),r.createElement(W,{onDelete:n,data:t}))}}]),[i,n]);return a?r.createElement(u.A,null):r.createElement(N.A,{idColumn:"email,source,domain",data:t,pageCount:l,columns:s,disableSortRemove:!0,onStateChange:c,initialState:o})};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const T=()=>{var e;const t=(0,o.W6)(),{apiUrl:n}=(0,c.Y)(),{path:a,url:h}=(0,o.W5)(),{autoWhitelistEmail:p}=(0,s.t0)(),[E,g]=(0,r.useState)(p),[b,y]=(0,r.useState)(null!==(e=p.searchQuery)&&void 0!==e?e:""),A=(0,r.useCallback)((e=>{(0,s.ZC)("autoWhitelistEmail",I(I({},e),{},{searchQuery:b})),g((t=>I(I(I({},t),e),{},{searchQuery:b})))}),[b]);(0,r.useEffect)((()=>{const e=I(I({},E),{},{pageIndex:0,searchQuery:b});(0,s.ZC)("autoWhitelistEmail",e),g(e)}),[b]);const{isLoading:C,isError:f,error:v,data:S,isFetching:k,refetch:w}=(0,l.useQuery)(["awl","emails",E,b],(()=>{let e="".concat(n,"/awl/emails?start=").concat(E.pageIndex,"&max=").concat(E.pageSize,"&query=").concat(b);return E.sortBy[0]&&(e+="&sortBy=".concat(E.sortBy[0].id,"&desc=").concat(E.sortBy[0].desc?1:0)),fetch(e).then((e=>e.json()))}),{keepPreviousData:!0});return C?r.createElement(u.A,null):r.createElement(i.A,{title:"autoWhitelist.email.header"},r.createElement(d.A,{title:"autoWhitelist.email.header",buttons:r.createElement(m.A,{label:"button.addEmail",onClick:()=>t.push("".concat(h,"/add"))}),searchQuery:b,setSearchQuery:y}),f?r.createElement("div",null,"Error: ",v):r.createElement(z,{data:S.results,refetch:w,pageCount:Math.ceil(S.count/E.pageSize),isFetching:k||C,initialState:E,onStateChange:A}),r.createElement(o.qh,{path:"".concat(a,"/add")},r.createElement(j,{onCancel:()=>t.push(h),onCreate:()=>{t.push(h),w()}})))}},2418:(e,t,n)=>{n.d(t,{$n:()=>l,Bp:()=>r,DX:()=>a});const a="dd.MM.yyyy",r="dd.MM.yyyy HH:mm",l="dd.MM.yyyy HH:mm:ss"}}]);